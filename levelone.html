<html>
  <head>
     <script src= "p5.min.js"></script>
       <script src="p5.collide2d.min.js"></script>
       <script src="p5.sound.min.js"></script>
  <style>
    body{
      overflow:hidden;
   padding:0;
   margin:0;
    }
  </style>
  </head>
  <body>
    <script>
      var w= window.innerWidth;
      var h=window.innerHeight;
      var bgimage;
      var animal;
      var bgmusic;
      var user;
      var power;
      var loss;
      var moana= new moana();
      var crab= new crab();
      var hook= new hook();
       var hitOne=false;// collision betweeen the user and the crab
      
      function preload(){
        bgimage=loadImage("crablair.jpg");
        bgimage.resize(w,h);
         user =loadImage("moana.png");
        bgmusic=loadSound("shiny.mp3");
        animal= loadImage("tamatoa.png");
        power=loadImage("hook.png");
        bgmusic= loadSound("shiny.mp3");
        loss= loadSound("youlose.mp3");
      }
      function setup(){
        createCanvas(w,h);
        bgimage.loadPixels();
        animal.loadPixels();
        power.loadPixels();
        bgmusic.setVolume(1);
        bgmusic.play();
        bgmusic.loop();
        
      }
      function draw(){
        background(bgimage);
        moana.show();
        moana.update();
        crab.show();
        crab.update();
        crab.reverse();
        hook.show();
        hook.score();
      }
      function moana(){
        this.x=0;
        this.y=500;
        this.width=150;
        this.height=150;
       
           
             this.show=function(){
          image(user,this.x, this.y,this.width, this.height);
           
        }
        
        this.move= function(){
            if(keyIsDown(65) && (this.x > 0)){//when a button is pressed moves left
        this.x-=10;
        
      }
    if (keyIsDown(68)&& (this.x< w-0)){//when d button is pressed moves right
      this.x+=10;
    }
      
    }
        
    
    function keyPressed(){//reserved name in order to press a key call this name
      if (keyCode===32){
      moana.up();
    }
    
    }
    
function crab(){
 var speed=7;// speed of the crab
  this.x=0-100;//starts off of the screen
 this.y= Math.floor(Math.random()*h);// random point on the y axis
  this.width=100;
  this.height=100;
  this.show=function(){
    
    image(animal,this.x,this.y,this.width,this.height);
  }
  this.update=function(){//makes the ball fall down
 this.x= this.x+speed;
 if (this.x > w){
  
  speed=-speed;
  
 }
  
    
  }
this.reverse= function(){
  if(this.x<0){

speed=7;
  }

}

}
  hitOne=collideRectCircle(crab.x,crab.y,crab.width/2,crab.height/2,moana.x,moana.y,50);// collision betweeen the user and the crab
        if (hitOne=== true){
          noLoop();
         document.getElementById("youlose").innerHTML="Try Again?";
        button= createButton("restart");
        button.position(500,500);
        button.mousePressed(reload);
        loss.play();
        
          
        }
function hook(){
  this.x=Math.floor(Math.random()*w);
  this.y=Math.floor(Math.random()*h);
  this.width=100;
  this.height=100;
  this.count=0;
  this.show=function(){
    
    image(power,this.x,this.y,this.width,this.height);
  }
 this.score=function(){
   d= dist(this.x, this.y, moana.x, moana.y);
   if (d<50){
   location.href("gravity.html");
   }
     
   }
 
  
}


function restart(){
  location.href="levelone.html";
}

    </script>
  </body>
</html>