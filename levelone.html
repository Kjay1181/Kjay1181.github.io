<html>
  <head>
     <script src= "p5.min.js"></script>
       <script src="p5.collide2d.min.js"></script>
  <style>
    body{
      overflow:hidden;
   padding:0;
   margin:0;
    }
  </style>
  </head>
  <body>
    <script>
      var w= window.innerWidth;
      var h=window.innerHeight;
      var bgimage;
      var crab;
      var bgmusic;
      var moana;
      var power;
      var moana= new moana();
      var crab= new crab();
      var hook= new hook();
      function preload(){
        bgimage=loadImage("crablair.jpg");
        bgimage.resize(w,h);
         moana =loadImage("moana.png");
        bgmusic=loadSound("shiny.mp3");
        crab= loadImage("tamatoa.png");
        power=loadImage("hook.png");
      }
      function setup(){
        createCanvas(w,h);
        bgimage.loadPixels();
        crab.loadPixels();
        power.loadPixels();
        bgmusic.setVolume(1);
        bgmusic.play();
        bgmusic.loop();
        
      }
      function draw(){
        background(bgimage);
        moana.show();
        moana.up();
        moana.update();
        crab.show();
        crab.update();
        crab.reverse();
        hook.show();
        hook.score();
      }
      function moana(){
        this.x=0;
        this.y=500;
        this.width=150;
        this.height=150;
        this.gravity=0.5;// the force of gravity
     this.lift=-10;//opposing force of gravity
     this.velocity=0;// speed of gravity
           
             this.show=function(){
          image(moana,this.x, this.y,this.width, this.height);
          if(this.y>h){
        this.gravity= 0;
      }
        }
         this.up=function(){
        this.velocity+=this.lift;//when I go up im gonna impose the gravity by negative ten
        
      }
        this.move= function(){
            if(keyIsDown(65) && (this.x > 0)){//when a button is pressed moves left
        this.x-=10;
        
      }
    if (keyIsDown(68)&& (this.x< w-0)){//when d button is pressed moves right
      this.x+=10;
    }
      
    }
        
        this.update=function(){//makes the ball fall down
          this.velocity+= this.gravity;
          this.y+=this.velocity;
          this.velocity*=0.9;
          if(this.y > h){// stops on the floor
            this.y= h;
            this.velocity=0;
          }
          if (this.y<0){//stops on the ceiling
         this.y=0;
          this.velocity=0;
          
          }
        }
      }
    function keyPressed(){//reserved name in order to press a key call this name
      if (keyCode===32){
      jumper.up();
    }
    
    }
    
function crab(){
 var speed=7;// speed of the crab
  this.x=0-100;//starts off of the screen
 this.y= Math.floor(Math.random()*h);// random point on the y axis
  this.width=100;
  this.height=100;
  this.show=function(){
    
    image(crab,this.x,this.y,this.width,this.height);
  }
  this.update=function(){//makes the ball fall down
 this.x= this.x+speed;
 if (this.x > w){
  
  speed=-speed;
  
 }
  
    
  }
this.reverse= function(){
  if(this.x<0){

speed=7;
  }

}

}
function hook(){
  this.x=Math.floor(Math.random()*w);
  this.y=Math.floor(Math.random()*h);
  this.width=50;
  this.height=50;
  this.count=0;
  this.show=function(){
    
    image(power,this.x,this.y,this.width,this.height);
  }
 this.score=function(){
   d= dist(this.x, this.y, moana.x, moana.y);
   if (d<50){
   location.href("gravity.html");
   }
     
   }
 
  
}




    </script>
  </body>
</html>